var script=function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";t.e=function(e,t){return e.timestamp<t.timestamp?-1:e.timestamp>t.timestamp?1:0},t.c=function(e,t){return e.filesize<t.filesize?-1:e.filesize>t.filesize?1:0},t.b=function(e,t){return e.name.localeCompare(t.name)},t.a=function(e,t){let n=e.category.localeCompare(t.category);return n||e.name.localeCompare(t.name)},t.d=function(e,t){return e-t}},function(e,t,n){"use strict";function i(e){return e<10?"0"+e:e}t.a=function(e,t,n,i){let a=document.createElement(e);a.className=t,n.appendChild(a),i&&(a.id=i);return a},t.b=function(){document.getElementById("main_content").innerHTML=""},t.c=function(e){let t=new Date;return t.setTime(1e3*e.timestamp),"<p>Дата снимка: "+i(t.getDate())+"."+i(t.getMonth()+1)+"."+t.getFullYear()+"&nbsp;"+t.getHours()+":"+i(t.getMinutes())+":"+i(t.getSeconds())+"</p><p>Категория снимка: "+e.category+"</p><p>Имя файла: "+e.name+"</p><p>Размер файла: "+(n=e.filesize,n<1024?n+" Б":Math.round(n/1024)+" Кб")+"</p>";var n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),a=(n.n(i),n(4)),r=n(5);let c,o=document.getElementById("main_content"),s=document.getElementById("main_footer"),l={cardsForOneList:20,currentSort:"category"};var d,u,m;d="http://93.91.165.233:8081/frontend_data/catalog.json",u=function(e,t){null!==e?alert("Something went wrong: "+e):((c=t).forEach(function(e,t,n){e.name=e.image.substring(e.image.lastIndexOf("/")+1)}),l.numberOfLists=Math.ceil(c.length/l.cardsForOneList),l.currentList=1,Object(r.b)(c,l),y())},(m=new XMLHttpRequest).open("GET",d,!0),m.responseType="json",m.onload=function(){var e=m.status;if(200!==e)return u(e,m.response);u(null,m.response)},m.send();let p=document.forms.sortImages.sortType,f=null;for(var g=0;g<p.length;g++)p[g].addEventListener("click",v);function v(e){e.preventDefault(),this!==f&&(f&&f.classList.remove("chosen"),(f=this).classList.add("chosen"),l.currentSort=f.id.split("_")[2],l.currentList=1,Object(r.b)(c,l))}function b(e){e.preventDefault(),y(),"view_panels"==this.id?(Object(r.b)(c,l),window.removeEventListener("resize",a.b),o.style.justifyContent="",o.style.flexWrap="",s.style.display=""):"view_tree"==this.id&&(Object(a.c)(c,l),o.addEventListener("click",a.d),o.addEventListener("click",a.a),window.addEventListener("resize",a.b),s.style.display="none"),y()}function y(){let e=document.getElementById("view_panels").classList,t=document.getElementById("view_tree").classList;"cards"==l.currentView?(e.add("chosen"),t.remove("chosen")):(e.remove("chosen"),t.add("chosen"))}document.getElementById("clear_closed").addEventListener("click",function(e){!function(e,t,n){e.preventDefault();var i=JSON.parse(localStorage.getItem("closed"));t.push.apply(t,i),localStorage.removeItem("closed"),"cards"==n.currentView?Object(r.b)(t,n):"structure"==n.currentView&&Object(a.c)(t,n)}(e,c,l)}),document.getElementById("paginator").addEventListener("click",function(e){Object(r.a)(e,c,l)}),document.getElementById("view_panels").addEventListener("click",b),document.getElementById("view_tree").addEventListener("click",b)},function(e,t){},function(e,t,n){"use strict";t.c=function(e,t){Object(a.b)(),t.currentView="structure",e.sort(i.a);let n=Object(a.a)("ul","container main-container",r,"main_container"),o=Object(a.a)("li","node is-root expand-open",n,"main_container");Object(a.a)("div","expand",o),Object(a.a)("div","content",o).innerHTML="root";let s=Object(a.a)("ul","container",o),l="",d=null;e.forEach(function(e,t,n){let i=e.category;if(l!=i){let e=Object(a.a)("li","node expand-closed",s);Object(a.a)("div","expand",e),Object(a.a)("div","content",e).innerHTML=i;let t=Object(a.a)("ul","container",e);l=i,d=t}let r=Object(a.a)("li","node expand-leaf",d);Object(a.a)("div","expand",r);let c=Object(a.a)("div","content",r),o=Object(a.a)("div","thumbnail-wrapper",c),u=o.dataset;u.name=e.name,u.category=e.category,u.timestamp=e.timestamp,u.filesize=e.filesize,Object(a.a)("img","",o).src="http://93.91.165.233:8081/frontend_data/"+e.image});let u=Object(a.a)("div","viewer-box",r),m=Object(a.a)("div","viewer",u,"viewer"),p=Object(a.a)("div","viewer-image-wrapper",m,"viewer_image_wrapper");Object(a.a)("img","",p,"viewer_image"),Object(a.a)("div","viewer-image-info",m,"viewer_image_info"),c()},t.a=function(e){let t=e.target.closest(".thumbnail-wrapper");if(!t)return;let n=document.getElementById("viewer_image"),i=document.getElementById("viewer_image_info"),r=t.querySelector("img");t.classList.contains("thumbnail-open")?t.classList.remove("thumbnail-open"):(t.classList.add("thumbnail-open"),t.nextSibling||t.parentNode.appendChild(function(e){let t=document.createElement("div");return t.classList.add("card-info"),t.innerHTML=Object(a.c)(e),t}(t.dataset)),n.src=r.src,i.innerHTML=Object(a.c)(t.dataset));c()},t.d=function(e){var t=e.target;if(!t.classList.contains("expand"))return;var n=t.parentNode.classList;if(n.contains("expand-leaf"))return;n.contains("expand-open")?(n.remove("expand-open"),n.add("expand-closed")):(n.remove("expand-closed"),n.add("expand-open"))},t.b=c;var i=n(0),a=n(1);let r=document.getElementById("main_content");function c(){let e=document.getElementById("viewer").style,t=r.style;window.innerWidth>840?(e.width=function(){let e=parseInt(window.getComputedStyle(r,null).width),t=parseInt(window.getComputedStyle(document.getElementById("main_container"),null).width);return e-t}()+"px",t.justifyContent="space-between",t.flexWrap="nowrap",e.display=""):(e.display="none",t.justifyContent="",t.flexWrap="")}},function(e,t,n){"use strict";t.b=c,t.a=function(e,t,n){let i=e.target.closest(".list-link");if(!i)return;if(!i.dataset.list)return;n.currentList=i.dataset.list,c(t,n)};var i=n(1),a=n(0);let r=document.getElementById("main_content");function c(e,t){Object(i.b)(),t.currentView="cards";var n=JSON.parse(localStorage.getItem("closed"));n||(n=[]),n.forEach(function(t,n,i){var a=e.findIndex(e=>e.image==t.image);a>-1&&e.splice(a,1)}),"size"==t.currentSort?e.sort(a.c):"timestamp"==t.currentSort?e.sort(a.e):"name"==t.currentSort?e.sort(a.b):"category"==t.currentSort&&e.sort(a.a),t.numberOfLists=Math.ceil(e.length/t.cardsForOneList),function(e){let t=document.getElementById("paginator");t.innerHTML="";let n=new Set,i=+e.currentList,r=+e.numberOfLists;n.add(1),n.add(r),n.add(i),i>2&&n.add(i-1),i<r-1&&n.add(i+1);let c=Array.from(n).sort(a.d);2!=c[1]&&c.splice(1,0,"&hellip;"),c[c.length-2]!=r-1&&c.splice(-1,0,"&hellip;"),c.forEach(function(e,n,i){let a=document.createElement("a");a.innerHTML=e,a.classList.add("list-link"),"&hellip;"!=e&&(a.dataset.list=e),t.appendChild(a)})}(t);let c=(t.currentList-1)*t.cardsForOneList;for(let n=c;n<c+t.cardsForOneList&&n<e.length;n++){let a=Object(i.a)("article","",r);a.dataset.image=e[n].image,Object(i.a)("div","close",a).addEventListener("click",function(n){o(n,e,t)});let c=Object(i.a)("div","image-wrapper",a),s=Object(i.a)("img","",c);s.src="http://93.91.165.233:8081/frontend_data/"+e[n].image,s.style.visibility="hidden",s.onload=function(){this.style.visibility="visible"},Object(i.a)("div","card-info",a).innerHTML=Object(i.c)(e[n])}}function o(e,t,n){var i=e.currentTarget.closest("article");e.currentTarget.remove(),function e(i){setTimeout(function(){""==i.style.opacity&&(i.style.opacity="1.0"),i.style.opacity=""+(+i.style.opacity-.05),i.style.opacity>0?e(i):c(t,n)},10)}(i);var a=JSON.parse(localStorage.getItem("closed"));a||(a=[]),a.push(t.find(function(e,t,n){return i.dataset.image==e.image}));var r=JSON.stringify(a);localStorage.setItem("closed",r)}}]);